{"version":3,"sources":["webpack:///src/views/pets/storyPage.vue","webpack:///./src/api/baseWsUrl.js","webpack:///./src/views/pets/storyPage.vue?4893","webpack:///./src/views/pets/storyPage.vue","webpack:///./node_modules/_babel-runtime@6.26.0@babel-runtime/core-js/get-iterator.js","webpack:///./node_modules/_core-js@2.6.12@core-js/library/modules/core.get-iterator.js","webpack:///./node_modules/_core-js@2.6.12@core-js/library/fn/get-iterator.js"],"names":["storyPage","data","websock","count","testRate","msgList","labelList","choosedLabel","setAttr","setLabel","storyContent","userId","reloadPet","userCount","attributeSet","left","sumNum","maxNum","attribute","body","weight","hanger","friendly","clean","mod","happy","angry","terrified","health","totalHealth","headHealth","bodyHealth","footHealth","tailHealth","born","lucky","intelligence","strength","charm","created","this","getUserCount","updated","ele","document","getElementById","scrollTop","scrollHeight","methods","load","_this","params","chooesdLabelIds","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","get_iterator_default","next","done","label","value","push","labelId","err","return","$store","dispatch","then","result","code","console","log","$message","error","msg","catch","finally","loadStory","_this2","initWs","_this3","WebSocket","onopen","onmessage","wsOnMessage","onclose","wsOnclose","event","changeBornAttribute","send","chooseLabel","_this4","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","item","useLabel","chooesd","length","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","isUseLabel","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","reload","pets_storyPage","render","_vm","_h","$createElement","_c","_self","_v","staticClass","attrs","min","max","on","change","model","callback","$$v","$set","expression","_s","type","click","_e","_l","key","name","$event","content","id","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","module","exports","default","__esModule","anObject","get","getIterator","it","iterFn","TypeError","call"],"mappings":"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","file":"static/js/0.ecd024858df4ed2c702f.js","sourcesContent":["<template>\r\n  <div>\r\n    <h1>猫猫生存模拟器</h1>\r\n    <div class=\"attrbuteSet\" v-if=\"setAttr == true\">\r\n      <h1>请分配属性</h1>\r\n      <div>幸运值</div>\r\n      <el-input-number\r\n        v-model=\"attribute.born.lucky\"\r\n        :min=\"0\"\r\n        :max=\"attribute.born.lucky + attributeSet.left\"\r\n        @change=\"changeBornAttribute\"\r\n        label=\"幸运值\"\r\n      ></el-input-number>\r\n      <div>智力</div>\r\n      <el-input-number\r\n        v-model=\"attribute.born.intelligence\"\r\n        :min=\"0\"\r\n        :max=\"attribute.born.intelligence + attributeSet.left\"\r\n        @change=\"changeBornAttribute\"\r\n        label=\"智力\"\r\n      ></el-input-number>\r\n      <div>体力</div>\r\n      <el-input-number\r\n        v-model=\"attribute.born.strength\"\r\n        :min=\"0\"\r\n        :max=\"attribute.born.strength + attributeSet.left\"\r\n        @change=\"changeBornAttribute\"\r\n        label=\"体力\"\r\n      ></el-input-number>\r\n      <div>魅力</div>\r\n      <el-input-number\r\n        v-model=\"attribute.born.charm\"\r\n        :min=\"0\"\r\n        :max=\"attribute.born.charm + attributeSet.left\"\r\n        @change=\"changeBornAttribute\"\r\n        label=\"魅力\"\r\n      ></el-input-number>\r\n      <br />\r\n      <br />\r\n      <el-tag>你将是今天的第{{ userCount }}只小猫咪</el-tag>\r\n      <br />\r\n      <br />\r\n      <el-button type=\"info\" @click=\"chooseLabel\">选择天赋</el-button>\r\n    </div>\r\n    <div class=\"selectLabel\" v-if=\"setLabel == true\">\r\n      <el-card\r\n        class=\"box-card\"\r\n        :key=\"key\"\r\n        :label=\"key\"\r\n        v-for=\"(item, key) in labelList\"\r\n        :name=\"key\"\r\n      >\r\n        <el-tag :type=\"isUseLabel(item)\" @click=\"useLabel(item)\">{{\r\n          item.content\r\n        }}</el-tag>\r\n      </el-card>\r\n      <el-button type=\"info\" @click=\"reload\">返回选择属性</el-button>\r\n\r\n      <el-button type=\"info\" @click=\"initWs\">开始猫生</el-button>\r\n    </div>\r\n    <div class=\"storyContent\" v-if=\"storyContent == true\">\r\n      <br />\r\n      <br />\r\n\r\n      <div @click=\"loadStory()\">\r\n        <el-card class=\"storyLines\" id=\"storyLines\">\r\n          <div v-for=\"msg in msgList\" class=\"infinite-list-item\">\r\n            <div class=\"line\">{{ msg }}</div>\r\n            <br />\r\n          </div>\r\n        </el-card>\r\n      </div>\r\n      <el-button type=\"info\" @click=\"reload\" v-if=\"reloadPet == true\"\r\n        >重新开始</el-button\r\n      >\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport baseWsUrl from \"@/api/baseWsUrl\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      websock: null,\r\n      count: 0,\r\n      testRate: 0,\r\n      msgList: [],\r\n      labelList: [],\r\n      choosedLabel: [],\r\n      setAttr: true,\r\n      setLabel: false,\r\n      storyContent: false,\r\n      userId: \"\",\r\n      reloadPet: false,\r\n      userCount: 0,\r\n      attributeSet: {\r\n        left: 20,\r\n        sumNum: 20,\r\n        maxNum: 10,\r\n      },\r\n      attribute: {\r\n        body: { weight: 0, hanger: 0, friendly: 0, clean: 0 },\r\n        mod: { happy: 0, angry: 0, terrified: 0 },\r\n        health: {\r\n          totalHealth: 0,\r\n          headHealth: 0,\r\n          bodyHealth: 0,\r\n          footHealth: 0,\r\n          tailHealth: 0,\r\n        },\r\n        born: { lucky: 0, intelligence: 0, strength: 0, charm: 0 },\r\n      },\r\n    };\r\n  },\r\n  created() {\r\n    this.getUserCount();\r\n  },\r\n  updated() {\r\n    let ele = document.getElementById(\"storyLines\");\r\n    ele.scrollTop = ele.scrollHeight; //保证滚动条位于最底层\r\n  },\r\n  methods: {\r\n    load() {\r\n      this.msgList = [];\r\n      this.testRate += 1;\r\n      var params = {};\r\n      var chooesdLabelIds = []\r\n      for(let label of this.choosedLabel){\r\n        chooesdLabelIds.push(label.labelId)\r\n      }\r\n      params[\"labels\"] = chooesdLabelIds\r\n      params[\"attribute\"] = this.attribute;\r\n      params[\"userId\"] = this.userId;\r\n      this.$store\r\n        .dispatch(\"NewPet\", params)\r\n        .then((result) => {\r\n          let status = result.data.code;\r\n          if (status == 200) {\r\n            console.log(result.data.data);\r\n          } else {\r\n            this.$message.error(\"调用失败 \" + result.data.msg);\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n          return false;\r\n        })\r\n        .finally(() => {\r\n          this.storyContent = true;\r\n          this.setAttr = false;\r\n          this.setLabel = false;\r\n          this.loadStory();\r\n        });\r\n    },\r\n    getUserCount() {\r\n      this.$store\r\n        .dispatch(\"GetUserCount\")\r\n        .then((result) => {\r\n          let status = result.data.code;\r\n          if (status == 200) {\r\n            this.userCount = result.data.data;\r\n          } else {\r\n            this.$message.error(\"调用失败 \" + result.data.msg);\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n          return false;\r\n        })\r\n        .finally(() => {});\r\n    },\r\n    initWs() {\r\n      this.$store\r\n        .dispatch(\"NewUserId\", this.attribute)\r\n        .then((result) => {\r\n          let status = result.data.code;\r\n          if (status == 200) {\r\n            this.userId = result.data.data;\r\n          } else {\r\n            this.$message.error(\"调用失败 \" + result.data.msg);\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          return false;\r\n        })\r\n        .finally(() => {\r\n          this.websock = new WebSocket(\r\n            baseWsUrl + this.userId\r\n          );\r\n\r\n          this.websock.onopen = function () {\r\n            console.log(\"webSocket连接创建。。。\");\r\n          };\r\n\r\n          this.websock.onmessage = this.wsOnMessage;\r\n          this.websock.onclose = this.wsOnclose;\r\n          this.load();\r\n        });\r\n    },\r\n    wsOnMessage(event) {\r\n      var data = event.data;\r\n      this.msgList.push(data);\r\n    },\r\n    wsOnclose() {\r\n      this.reloadPet = true;\r\n      console.log(\"关闭连接\");\r\n    },\r\n    changeBornAttribute() {\r\n      this.attributeSet.left =\r\n        this.attributeSet.sumNum -\r\n        (this.attribute.born.lucky +\r\n          this.attribute.born.intelligence +\r\n          this.attribute.born.strength +\r\n          this.attribute.born.charm);\r\n    },\r\n    loadStory() {\r\n      this.websock.send(\"\");\r\n    },\r\n    chooseLabel() {\r\n      this.storyContent = false;\r\n      this.setAttr = false;\r\n      this.setLabel = true;\r\n      this.$store\r\n        .dispatch(\"GetLabel\", {})\r\n        .then((result) => {\r\n          let status = result.data.code;\r\n          if (status == 200) {\r\n            this.labelList = [];\r\n            for (let item of result.data.data) {\r\n              item[\"chooesd\"] = false;\r\n              this.labelList.push(item);\r\n            }\r\n          } else {\r\n            this.$message.error(\"调用失败 \" + result.data.msg);\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n          return false;\r\n        })\r\n        .finally(() => {});\r\n    },\r\n    useLabel(item) {\r\n      if (item.chooesd == false) {\r\n         if(this.choosedLabel.length + 1 > 4){\r\n            this.$message.error(\"最多选择4个属性！\")\r\n            return\r\n          }\r\n        item.chooesd = true;\r\n\r\n      } else {\r\n        item.chooesd = false;\r\n      }\r\n      this.choosedLabel = []\r\n      for(let label of this.labelList){\r\n        if(label.chooesd == true){\r\n          this.choosedLabel.push(label)\r\n        }\r\n      }\r\n    },\r\n    isUseLabel(item) {\r\n      for (let label of this.choosedLabel) {\r\n        if (item == label) {\r\n          return \"primary\";\r\n        }\r\n      }\r\n      return \"info\";\r\n    },\r\n    reload() {\r\n      this.storyContent = false;\r\n      this.setAttr = true;\r\n      this.setLabel = false;\r\n      this.reloadPet = false;\r\n      this.getUserCount();\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.storyLines {\r\n  overflow-y: auto;\r\n  -webkit-overflow-scrolling: touch;\r\n  white-space: nowrap;\r\n  width: 100%;\r\n  height: 250px;\r\n  scroll-behavior: auto;\r\n}\r\n.line {\r\n  border: 1px solid black;\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/views/pets/storyPage.vue","let baseWsUrl = \"ws://162.14.118.215:8080/story/\"\r\nexport default baseWsUrl\n\n\n// WEBPACK FOOTER //\n// ./src/api/baseWsUrl.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h1',[_vm._v(\"猫猫生存模拟器\")]),_vm._v(\" \"),(_vm.setAttr == true)?_c('div',{staticClass:\"attrbuteSet\"},[_c('h1',[_vm._v(\"请分配属性\")]),_vm._v(\" \"),_c('div',[_vm._v(\"幸运值\")]),_vm._v(\" \"),_c('el-input-number',{attrs:{\"min\":0,\"max\":_vm.attribute.born.lucky + _vm.attributeSet.left,\"label\":\"幸运值\"},on:{\"change\":_vm.changeBornAttribute},model:{value:(_vm.attribute.born.lucky),callback:function ($$v) {_vm.$set(_vm.attribute.born, \"lucky\", $$v)},expression:\"attribute.born.lucky\"}}),_vm._v(\" \"),_c('div',[_vm._v(\"智力\")]),_vm._v(\" \"),_c('el-input-number',{attrs:{\"min\":0,\"max\":_vm.attribute.born.intelligence + _vm.attributeSet.left,\"label\":\"智力\"},on:{\"change\":_vm.changeBornAttribute},model:{value:(_vm.attribute.born.intelligence),callback:function ($$v) {_vm.$set(_vm.attribute.born, \"intelligence\", $$v)},expression:\"attribute.born.intelligence\"}}),_vm._v(\" \"),_c('div',[_vm._v(\"体力\")]),_vm._v(\" \"),_c('el-input-number',{attrs:{\"min\":0,\"max\":_vm.attribute.born.strength + _vm.attributeSet.left,\"label\":\"体力\"},on:{\"change\":_vm.changeBornAttribute},model:{value:(_vm.attribute.born.strength),callback:function ($$v) {_vm.$set(_vm.attribute.born, \"strength\", $$v)},expression:\"attribute.born.strength\"}}),_vm._v(\" \"),_c('div',[_vm._v(\"魅力\")]),_vm._v(\" \"),_c('el-input-number',{attrs:{\"min\":0,\"max\":_vm.attribute.born.charm + _vm.attributeSet.left,\"label\":\"魅力\"},on:{\"change\":_vm.changeBornAttribute},model:{value:(_vm.attribute.born.charm),callback:function ($$v) {_vm.$set(_vm.attribute.born, \"charm\", $$v)},expression:\"attribute.born.charm\"}}),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('el-tag',[_vm._v(\"你将是今天的第\"+_vm._s(_vm.userCount)+\"只小猫咪\")]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"info\"},on:{\"click\":_vm.chooseLabel}},[_vm._v(\"选择天赋\")])],1):_vm._e(),_vm._v(\" \"),(_vm.setLabel == true)?_c('div',{staticClass:\"selectLabel\"},[_vm._l((_vm.labelList),function(item,key){return _c('el-card',{key:key,staticClass:\"box-card\",attrs:{\"label\":key,\"name\":key}},[_c('el-tag',{attrs:{\"type\":_vm.isUseLabel(item)},on:{\"click\":function($event){return _vm.useLabel(item)}}},[_vm._v(_vm._s(item.content))])],1)}),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"info\"},on:{\"click\":_vm.reload}},[_vm._v(\"返回选择属性\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"info\"},on:{\"click\":_vm.initWs}},[_vm._v(\"开始猫生\")])],2):_vm._e(),_vm._v(\" \"),(_vm.storyContent == true)?_c('div',{staticClass:\"storyContent\"},[_c('br'),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('div',{on:{\"click\":function($event){return _vm.loadStory()}}},[_c('el-card',{staticClass:\"storyLines\",attrs:{\"id\":\"storyLines\"}},_vm._l((_vm.msgList),function(msg){return _c('div',{staticClass:\"infinite-list-item\"},[_c('div',{staticClass:\"line\"},[_vm._v(_vm._s(msg))]),_vm._v(\" \"),_c('br')])}),0)],1),_vm._v(\" \"),(_vm.reloadPet == true)?_c('el-button',{attrs:{\"type\":\"info\"},on:{\"click\":_vm.reload}},[_vm._v(\"重新开始\")]):_vm._e()],1):_vm._e()])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-4e94c450\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/pets/storyPage.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4e94c450\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./storyPage.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./storyPage.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./storyPage.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4e94c450\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./storyPage.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/pets/storyPage.vue\n// module id = null\n// module chunks = ","module.exports = { \"default\": require(\"core-js/library/fn/get-iterator\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_babel-runtime@6.26.0@babel-runtime/core-js/get-iterator.js\n// module id = HzJ8\n// module chunks = 0","var anObject = require('./_an-object');\nvar get = require('./core.get-iterator-method');\nmodule.exports = require('./_core').getIterator = function (it) {\n  var iterFn = get(it);\n  if (typeof iterFn != 'function') throw TypeError(it + ' is not iterable!');\n  return anObject(iterFn.call(it));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_core-js@2.6.12@core-js/library/modules/core.get-iterator.js\n// module id = XO/m\n// module chunks = 0","require('../modules/web.dom.iterable');\nrequire('../modules/es6.string.iterator');\nmodule.exports = require('../modules/core.get-iterator');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_core-js@2.6.12@core-js/library/fn/get-iterator.js\n// module id = vY6q\n// module chunks = 0"],"sourceRoot":""}