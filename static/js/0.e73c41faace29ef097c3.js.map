{"version":3,"sources":["webpack:///./src/api/baseWsUrl.js","webpack:///src/views/pets/storyPage.vue","webpack:///./src/views/pets/storyPage.vue?1b23","webpack:///./src/views/pets/storyPage.vue","webpack:///./node_modules/babel-runtime/core-js/get-iterator.js","webpack:///./node_modules/core-js/library/fn/get-iterator.js","webpack:///./node_modules/core-js/library/modules/core.get-iterator.js"],"names":["baseWsUrl","location","host","storyPage","data","windowWidth","windowHeight","websock","count","testRate","msgList","labelList","choosedLabel","setAttr","setLabel","storyContent","userId","reloadPet","userCount","attributeSet","left","sumNum","maxNum","attribute","body","weight","hanger","friendly","clean","mod","happy","angry","terrified","health","totalHealth","headHealth","bodyHealth","footHealth","tailHealth","born","lucky","intelligence","strength","charm","created","this","getUserCount","updated","ele","document","getElementById","console","log","scrollHeight","scrollTop","methods","load","_this","getViewportSize","params","chooesdLabelIds","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","get_iterator_default","next","done","label","value","push","labelId","err","return","$store","dispatch","then","result","code","$message","error","msg","catch","finally","loadStory","_this2","initWs","_this3","WebSocket","api_baseWsUrl","onopen","onmessage","wsOnMessage","onclose","wsOnclose","event","info","changeBornAttribute","send","chooseLabel","_this4","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","item","useLabel","chooesd","length","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","isUseLabel","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","reload","window","innerWidth","documentElement","clientWidth","height","innerHeight","clientHeight","parseInt","pets_storyPage","render","_vm","_h","$createElement","_c","_self","staticClass","_v","attrs","min","max","on","change","model","callback","$$v","$set","expression","_s","type","click","_e","_l","key","name","$event","content","style","id","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","module","exports","default","__esModule","anObject","get","getIterator","it","iterFn","TypeError","call"],"mappings":"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","file":"static/js/0.e73c41faace29ef097c3.js","sourcesContent":["let baseWsUrl = 'ws://' + location.host + '/socket/story/'\n//let baseWsUrl = 'ws://' + '162.14.118.215:8080' + '/story/'\n\nexport default baseWsUrl\n\n\n// WEBPACK FOOTER //\n// ./src/api/baseWsUrl.js","<template>\n  <div class=\"petStory\">\n    <h1>猫猫生存模拟器</h1>\n    <div class=\"attrbuteSet\" v-if=\"setAttr == true\">\n      <h1>请分配属性</h1>\n      <div>幸运值</div>\n      <el-input-number\n        v-model=\"attribute.born.lucky\"\n        :min=\"0\"\n        :max=\"attribute.born.lucky + attributeSet.left\"\n        @change=\"changeBornAttribute\"\n        label=\"幸运值\"\n      ></el-input-number>\n      <div>智力</div>\n      <el-input-number\n        v-model=\"attribute.born.intelligence\"\n        :min=\"0\"\n        :max=\"attribute.born.intelligence + attributeSet.left\"\n        @change=\"changeBornAttribute\"\n        label=\"智力\"\n      ></el-input-number>\n      <div>体力</div>\n      <el-input-number\n        v-model=\"attribute.born.strength\"\n        :min=\"0\"\n        :max=\"attribute.born.strength + attributeSet.left\"\n        @change=\"changeBornAttribute\"\n        label=\"体力\"\n      ></el-input-number>\n      <div>魅力</div>\n      <el-input-number\n        v-model=\"attribute.born.charm\"\n        :min=\"0\"\n        :max=\"attribute.born.charm + attributeSet.left\"\n        @change=\"changeBornAttribute\"\n        label=\"魅力\"\n      ></el-input-number>\n      <br />\n      <br />\n      <el-tag>你将是今天的第{{ userCount }}只小猫咪</el-tag>\n      <br />\n      <br />\n      <el-button type=\"info\" @click=\"chooseLabel\">选择天赋</el-button>\n    </div>\n    <div class=\"selectLabel\" v-if=\"setLabel == true\">\n      <el-card\n        class=\"box-card\"\n        :key=\"key\"\n        :label=\"key\"\n        v-for=\"(item, key) in labelList\"\n        :name=\"key\"\n      >\n        <el-tag :type=\"isUseLabel(item)\" @click=\"useLabel(item)\">{{\n          item.content\n        }}</el-tag>\n      </el-card>\n      <el-button type=\"info\" @click=\"reload\">返回选择属性</el-button>\n\n      <el-button type=\"info\" @click=\"initWs\">开始猫生</el-button>\n    </div>\n    <div class=\"storyContent\" v-if=\"storyContent == true\">\n      <br />\n      <br />\n\n      <div @click=\"loadStory()\">\n        <el-card class=\"storyLines\" id=\"storyLines\" :style=\"{height: windowHeight}\">\n          <div v-for=\"msg in msgList\" class=\"infinite-list-item\">\n            <div class=\"line\">{{ msg }}</div>\n            <br />\n          </div>\n        </el-card>\n      </div>\n      <el-button type=\"info\" @click=\"reload\" v-if=\"reloadPet == true\"\n        >重新开始</el-button\n      >\n    </div>\n  </div>\n</template>\n\n<script>\nimport baseWsUrl from \"@/api/baseWsUrl\";\nexport default {\n  data() {\n    return {\n      windowWidth: 0,\n      windowHeight: 0,\n      websock: null,\n      count: 0,\n      testRate: 0,\n      msgList: [],\n      labelList: [],\n      choosedLabel: [],\n      setAttr: true,\n      setLabel: false,\n      storyContent: false,\n      userId: \"\",\n      reloadPet: false,\n      userCount: 0,\n      attributeSet: {\n        left: 20,\n        sumNum: 20,\n        maxNum: 10,\n      },\n      attribute: {\n        body: { weight: 0, hanger: 0, friendly: 0, clean: 0 },\n        mod: { happy: 0, angry: 0, terrified: 0 },\n        health: {\n          totalHealth: 0,\n          headHealth: 0,\n          bodyHealth: 0,\n          footHealth: 0,\n          tailHealth: 0,\n        },\n        born: { lucky: 0, intelligence: 0, strength: 0, charm: 0 },\n      },\n    };\n  },\n  created() {\n    this.getUserCount();\n  },\n  updated() {\n    let ele = document.getElementById(\"storyLines\");\n    if (ele != null) {\n      console.log(ele.scrollHeight);\n      ele.scrollTop = ele.scrollHeight; //保证滚动条位于最底层\n    }\n  },\n  methods: {\n    load() {\n      this.getViewportSize()\n      this.msgList = [];\n      this.testRate += 1;\n      var params = {};\n      var chooesdLabelIds = [];\n      for (let label of this.choosedLabel) {\n        chooesdLabelIds.push(label.labelId);\n      }\n      params[\"labels\"] = chooesdLabelIds;\n      params[\"attribute\"] = this.attribute;\n      params[\"userId\"] = this.userId;\n      this.$store\n        .dispatch(\"NewPet\", params)\n        .then((result) => {\n          let status = result.data.code;\n          if (status == 200) {\n            console.log(result.data.data);\n          } else {\n            this.$message.error(\"调用失败 \" + result.data.msg);\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n          return false;\n        })\n        .finally(() => {\n          this.storyContent = true;\n          this.setAttr = false;\n          this.setLabel = false;\n          this.loadStory();\n        });\n    },\n    getUserCount() {\n      this.$store\n        .dispatch(\"GetUserCount\")\n        .then((result) => {\n          let status = result.data.code;\n          if (status == 200) {\n            this.userCount = result.data.data;\n          } else {\n            this.$message.error(\"调用失败 \" + result.data.msg);\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n          return false;\n        })\n        .finally(() => {});\n    },\n    initWs() {\n      this.$store\n        .dispatch(\"NewUserId\", this.attribute)\n        .then((result) => {\n          let status = result.data.code;\n          if (status == 200) {\n            this.userId = result.data.data;\n          } else {\n            this.$message.error(\"调用失败 \" + result.data.msg);\n          }\n        })\n        .catch((err) => {\n          return false;\n        })\n        .finally(() => {\n          this.websock = new WebSocket(baseWsUrl + this.userId);\n\n          this.websock.onopen = function () {\n            console.log(\"webSocket连接创建。。。\");\n          };\n\n          this.websock.onmessage = this.wsOnMessage;\n          this.websock.onclose = this.wsOnclose;\n          this.load();\n        });\n    },\n    wsOnMessage(event) {\n      var data = event.data;\n      this.msgList.push(data);\n    },\n    wsOnclose() {\n      this.reloadPet = true;\n      this.$message.info(\"请重新开始\");\n      console.log(\"关闭连接\");\n    },\n    changeBornAttribute() {\n      this.attributeSet.left =\n        this.attributeSet.sumNum -\n        (this.attribute.born.lucky +\n          this.attribute.born.intelligence +\n          this.attribute.born.strength +\n          this.attribute.born.charm);\n    },\n    loadStory() {\n      this.websock.send(\"\");\n    },\n    chooseLabel() {\n      this.storyContent = false;\n      this.setAttr = false;\n      this.setLabel = true;\n      this.$store\n        .dispatch(\"GetLabel\", {})\n        .then((result) => {\n          let status = result.data.code;\n          if (status == 200) {\n            this.labelList = [];\n            for (let item of result.data.data) {\n              item[\"chooesd\"] = false;\n              this.labelList.push(item);\n            }\n          } else {\n            this.$message.error(\"调用失败 \" + result.data.msg);\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n          return false;\n        })\n        .finally(() => {});\n    },\n    useLabel(item) {\n      if (item.chooesd == false) {\n        if (this.choosedLabel.length + 1 > 4) {\n          this.$message.error(\"最多选择4个属性！\");\n          return;\n        }\n        item.chooesd = true;\n      } else {\n        item.chooesd = false;\n      }\n      this.choosedLabel = [];\n      for (let label of this.labelList) {\n        if (label.chooesd == true) {\n          this.choosedLabel.push(label);\n        }\n      }\n    },\n    isUseLabel(item) {\n      for (let label of this.choosedLabel) {\n        if (item == label) {\n          return \"primary\";\n        }\n      }\n      return \"info\";\n    },\n    reload() {\n      this.storyContent = false;\n      this.setAttr = true;\n      this.setLabel = false;\n      this.reloadPet = false;\n      this.getUserCount();\n    },\n    getViewportSize() {\n      this.windowWidth =\n        window.innerWidth ||\n        document.documentElement.clientWidth ||\n        document.body.clientWidth;\n      var height =\n        window.innerHeight ||\n        document.documentElement.clientHeight ||\n        document.body.clientHeight;\n      this.windowHeight = parseInt(height*0.8) + \"px\"\n      console.log(this.windowHeight)\n    },\n  },\n};\n</script>\n\n<style>\n.petStory {\n  height: 100%;\n}\n/* .storyLines {\n  overflow-y: auto;\n  -webkit-overflow-scrolling: touch;\n  white-space: nowrap;\n  width: 100%;\n  scroll-behavior: auto;\n  white-space: normal;\n  word-break: break-all;\n  word-wrap: break-word;\n} */\n.line {\n  border: 2px solid palevioletred;\n  height: auto;\n}\n\n</style>\n\n\n// WEBPACK FOOTER //\n// src/views/pets/storyPage.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"petStory\"},[_c('h1',[_vm._v(\"猫猫生存模拟器\")]),_vm._v(\" \"),(_vm.setAttr == true)?_c('div',{staticClass:\"attrbuteSet\"},[_c('h1',[_vm._v(\"请分配属性\")]),_vm._v(\" \"),_c('div',[_vm._v(\"幸运值\")]),_vm._v(\" \"),_c('el-input-number',{attrs:{\"min\":0,\"max\":_vm.attribute.born.lucky + _vm.attributeSet.left,\"label\":\"幸运值\"},on:{\"change\":_vm.changeBornAttribute},model:{value:(_vm.attribute.born.lucky),callback:function ($$v) {_vm.$set(_vm.attribute.born, \"lucky\", $$v)},expression:\"attribute.born.lucky\"}}),_vm._v(\" \"),_c('div',[_vm._v(\"智力\")]),_vm._v(\" \"),_c('el-input-number',{attrs:{\"min\":0,\"max\":_vm.attribute.born.intelligence + _vm.attributeSet.left,\"label\":\"智力\"},on:{\"change\":_vm.changeBornAttribute},model:{value:(_vm.attribute.born.intelligence),callback:function ($$v) {_vm.$set(_vm.attribute.born, \"intelligence\", $$v)},expression:\"attribute.born.intelligence\"}}),_vm._v(\" \"),_c('div',[_vm._v(\"体力\")]),_vm._v(\" \"),_c('el-input-number',{attrs:{\"min\":0,\"max\":_vm.attribute.born.strength + _vm.attributeSet.left,\"label\":\"体力\"},on:{\"change\":_vm.changeBornAttribute},model:{value:(_vm.attribute.born.strength),callback:function ($$v) {_vm.$set(_vm.attribute.born, \"strength\", $$v)},expression:\"attribute.born.strength\"}}),_vm._v(\" \"),_c('div',[_vm._v(\"魅力\")]),_vm._v(\" \"),_c('el-input-number',{attrs:{\"min\":0,\"max\":_vm.attribute.born.charm + _vm.attributeSet.left,\"label\":\"魅力\"},on:{\"change\":_vm.changeBornAttribute},model:{value:(_vm.attribute.born.charm),callback:function ($$v) {_vm.$set(_vm.attribute.born, \"charm\", $$v)},expression:\"attribute.born.charm\"}}),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('el-tag',[_vm._v(\"你将是今天的第\"+_vm._s(_vm.userCount)+\"只小猫咪\")]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"info\"},on:{\"click\":_vm.chooseLabel}},[_vm._v(\"选择天赋\")])],1):_vm._e(),_vm._v(\" \"),(_vm.setLabel == true)?_c('div',{staticClass:\"selectLabel\"},[_vm._l((_vm.labelList),function(item,key){return _c('el-card',{key:key,staticClass:\"box-card\",attrs:{\"label\":key,\"name\":key}},[_c('el-tag',{attrs:{\"type\":_vm.isUseLabel(item)},on:{\"click\":function($event){return _vm.useLabel(item)}}},[_vm._v(_vm._s(item.content))])],1)}),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"info\"},on:{\"click\":_vm.reload}},[_vm._v(\"返回选择属性\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"info\"},on:{\"click\":_vm.initWs}},[_vm._v(\"开始猫生\")])],2):_vm._e(),_vm._v(\" \"),(_vm.storyContent == true)?_c('div',{staticClass:\"storyContent\"},[_c('br'),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('div',{on:{\"click\":function($event){return _vm.loadStory()}}},[_c('el-card',{staticClass:\"storyLines\",style:({height: _vm.windowHeight}),attrs:{\"id\":\"storyLines\"}},_vm._l((_vm.msgList),function(msg){return _c('div',{staticClass:\"infinite-list-item\"},[_c('div',{staticClass:\"line\"},[_vm._v(_vm._s(msg))]),_vm._v(\" \"),_c('br')])}),0)],1),_vm._v(\" \"),(_vm.reloadPet == true)?_c('el-button',{attrs:{\"type\":\"info\"},on:{\"click\":_vm.reload}},[_vm._v(\"重新开始\")]):_vm._e()],1):_vm._e()])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-d18ee644\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/pets/storyPage.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-d18ee644\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./storyPage.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./storyPage.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./storyPage.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-d18ee644\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./storyPage.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/pets/storyPage.vue\n// module id = null\n// module chunks = ","module.exports = { \"default\": require(\"core-js/library/fn/get-iterator\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/get-iterator.js\n// module id = BO1k\n// module chunks = 0","require('../modules/web.dom.iterable');\nrequire('../modules/es6.string.iterator');\nmodule.exports = require('../modules/core.get-iterator');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/get-iterator.js\n// module id = fxRn\n// module chunks = 0","var anObject = require('./_an-object');\nvar get = require('./core.get-iterator-method');\nmodule.exports = require('./_core').getIterator = function (it) {\n  var iterFn = get(it);\n  if (typeof iterFn != 'function') throw TypeError(it + ' is not iterable!');\n  return anObject(iterFn.call(it));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/core.get-iterator.js\n// module id = g8Ux\n// module chunks = 0"],"sourceRoot":""}